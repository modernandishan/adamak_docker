var $6mU8w$swchelpers=require("@swc/helpers"),$6mU8w$justextend=require("just-extend");function $parcel$interopDefault(a){return a&&a.__esModule?a.default:a}function $parcel$defineInteropFlag(a){Object.defineProperty(a,"__esModule",{value:!0,configurable:!0})}function $parcel$export(e,n,v,s){Object.defineProperty(e,n,{get:v,set:s,enumerable:!0,configurable:!0})}$parcel$defineInteropFlag(module.exports),$parcel$export(module.exports,"default",(function(){return $a601ff30f483e917$export$2e2bcd8739ae039})),$parcel$export(module.exports,"Dropzone",(function(){return $a601ff30f483e917$export$2e2bcd8739ae039}));var $b1d17cfb1d15c36a$export$2e2bcd8739ae039=function(){"use strict";function $b1d17cfb1d15c36a$export$2e2bcd8739ae039(){$6mU8w$swchelpers.classCallCheck(this,$b1d17cfb1d15c36a$export$2e2bcd8739ae039)}return $6mU8w$swchelpers.createClass($b1d17cfb1d15c36a$export$2e2bcd8739ae039,[{key:"on",value:function(event,fn){return this._callbacks=this._callbacks||{},this._callbacks[event]||(this._callbacks[event]=[]),this._callbacks[event].push(fn),this}},{key:"emit",value:function(event){for(var _len=arguments.length,args=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)args[_key-1]=arguments[_key];this._callbacks=this._callbacks||{};var callbacks=this._callbacks[event],_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;if(callbacks)try{for(var _step,_iterator=callbacks[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){_step.value.apply(this,args)}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return this.element&&this.element.dispatchEvent(this.makeEvent("dropzone:"+event,{args:args})),this}},{key:"makeEvent",value:function(eventName,detail){var params={bubbles:!0,cancelable:!0,detail:detail};if("function"==typeof window.CustomEvent)return new CustomEvent(eventName,params);var evt=document.createEvent("CustomEvent");return evt.initCustomEvent(eventName,params.bubbles,params.cancelable,params.detail),evt}},{key:"off",value:function(event,fn){if(!this._callbacks||0===arguments.length)return this._callbacks={},this;var callbacks=this._callbacks[event];if(!callbacks)return this;if(1===arguments.length)return delete this._callbacks[event],this;for(var i=0;i<callbacks.length;i++){if(callbacks[i]===fn){callbacks.splice(i,1);break}}return this}}]),$b1d17cfb1d15c36a$export$2e2bcd8739ae039}(),$69c61888cc1f4c57$exports={},$b657c03155fc27e2$var$defaultOptions={url:null,method:"post",withCredentials:!1,timeout:null,parallelUploads:2,uploadMultiple:!1,chunking:!1,forceChunking:!1,chunkSize:2097152,parallelChunkUploads:!1,retryChunks:!1,retryChunksLimit:3,maxFilesize:256,paramName:"file",createImageThumbnails:!0,maxThumbnailFilesize:10,thumbnailWidth:120,thumbnailHeight:120,thumbnailMethod:"crop",resizeWidth:null,resizeHeight:null,resizeMimeType:null,resizeQuality:.8,resizeMethod:"contain",filesizeBase:1e3,maxFiles:null,headers:null,defaultHeaders:!0,clickable:!0,ignoreHiddenFiles:!0,acceptedFiles:null,acceptedMimeTypes:null,autoProcessQueue:!0,autoQueue:!0,addRemoveLinks:!1,previewsContainer:null,disablePreviews:!1,hiddenInputContainer:"body",capture:null,renameFilename:null,renameFile:null,forceFallback:!1,dictDefaultMessage:"Drop files here to upload",dictFallbackMessage:"Your browser does not support drag'n'drop file uploads.",dictFallbackText:"Please use the fallback form below to upload your files like in the olden days.",dictFileTooBig:"File is too big ({{filesize}}MiB). Max filesize: {{maxFilesize}}MiB.",dictInvalidFileType:"You can't upload files of this type.",dictResponseError:"Server responded with {{statusCode}} code.",dictCancelUpload:"Cancel upload",dictUploadCanceled:"Upload canceled.",dictCancelUploadConfirmation:"Are you sure you want to cancel this upload?",dictRemoveFile:"Remove file",dictRemoveFileConfirmation:null,dictMaxFilesExceeded:"You can not upload any more files.",dictFileSizeUnits:{tb:"TB",gb:"GB",mb:"MB",kb:"KB",b:"b"},init:function(){},params:function(files,xhr,chunk){if(chunk)return{dzuuid:chunk.file.upload.uuid,dzchunkindex:chunk.index,dztotalfilesize:chunk.file.size,dzchunksize:this.options.chunkSize,dztotalchunkcount:chunk.file.upload.totalChunkCount,dzchunkbyteoffset:chunk.index*this.options.chunkSize}},accept:function(file,done){return done()},chunksUploaded:function(file,done){done()},binaryBody:!1,fallback:function(){var messageElement;this.element.className="".concat(this.element.className," dz-browser-not-supported");var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=this.element.getElementsByTagName("div")[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var child=_step.value;if(/(^| )dz-message($| )/.test(child.className)){messageElement=child,child.className="dz-message";break}}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}messageElement||(messageElement=$a601ff30f483e917$export$2e2bcd8739ae039.createElement('<div class="dz-message"><span></span></div>'),this.element.appendChild(messageElement));var span=messageElement.getElementsByTagName("span")[0];return span&&(null!=span.textContent?span.textContent=this.options.dictFallbackMessage:null!=span.innerText&&(span.innerText=this.options.dictFallbackMessage)),this.element.appendChild(this.getFallbackForm())},resize:function(file,width,height,resizeMethod){var info={srcX:0,srcY:0,srcWidth:file.width,srcHeight:file.height},srcRatio=file.width/file.height;null==width&&null==height?(width=info.srcWidth,height=info.srcHeight):null==width?width=height*srcRatio:null==height&&(height=width/srcRatio);var trgRatio=(width=Math.min(width,info.srcWidth))/(height=Math.min(height,info.srcHeight));if(info.srcWidth>width||info.srcHeight>height)if("crop"===resizeMethod)srcRatio>trgRatio?(info.srcHeight=file.height,info.srcWidth=info.srcHeight*trgRatio):(info.srcWidth=file.width,info.srcHeight=info.srcWidth/trgRatio);else{if("contain"!==resizeMethod)throw new Error("Unknown resizeMethod '".concat(resizeMethod,"'"));srcRatio>trgRatio?height=width/srcRatio:width=height*srcRatio}return info.srcX=(file.width-info.srcWidth)/2,info.srcY=(file.height-info.srcHeight)/2,info.trgWidth=width,info.trgHeight=height,info},transformFile:function(file,done){return(this.options.resizeWidth||this.options.resizeHeight)&&file.type.match(/image.*/)?this.resizeImage(file,this.options.resizeWidth,this.options.resizeHeight,this.options.resizeMethod,done):done(file)},previewTemplate:$parcel$interopDefault($69c61888cc1f4c57$exports='<div class="dz-preview dz-file-preview">\n  <div class="dz-image"><img data-dz-thumbnail=""></div>\n  <div class="dz-details">\n    <div class="dz-size"><span data-dz-size=""></span></div>\n    <div class="dz-filename"><span data-dz-name=""></span></div>\n  </div>\n  <div class="dz-progress">\n    <span class="dz-upload" data-dz-uploadprogress=""></span>\n  </div>\n  <div class="dz-error-message"><span data-dz-errormessage=""></span></div>\n  <div class="dz-success-mark">\n    <svg width="54" height="54" viewBox="0 0 54 54" fill="white" xmlns="http://www.w3.org/2000/svg">\n      <path d="M10.2071 29.7929L14.2929 25.7071C14.6834 25.3166 15.3166 25.3166 15.7071 25.7071L21.2929 31.2929C21.6834 31.6834 22.3166 31.6834 22.7071 31.2929L38.2929 15.7071C38.6834 15.3166 39.3166 15.3166 39.7071 15.7071L43.7929 19.7929C44.1834 20.1834 44.1834 20.8166 43.7929 21.2071L22.7071 42.2929C22.3166 42.6834 21.6834 42.6834 21.2929 42.2929L10.2071 31.2071C9.81658 30.8166 9.81658 30.1834 10.2071 29.7929Z"></path>\n    </svg>\n  </div>\n  <div class="dz-error-mark">\n    <svg width="54" height="54" viewBox="0 0 54 54" fill="white" xmlns="http://www.w3.org/2000/svg">\n      <path d="M26.2929 20.2929L19.2071 13.2071C18.8166 12.8166 18.1834 12.8166 17.7929 13.2071L13.2071 17.7929C12.8166 18.1834 12.8166 18.8166 13.2071 19.2071L20.2929 26.2929C20.6834 26.6834 20.6834 27.3166 20.2929 27.7071L13.2071 34.7929C12.8166 35.1834 12.8166 35.8166 13.2071 36.2071L17.7929 40.7929C18.1834 41.1834 18.8166 41.1834 19.2071 40.7929L26.2929 33.7071C26.6834 33.3166 27.3166 33.3166 27.7071 33.7071L34.7929 40.7929C35.1834 41.1834 35.8166 41.1834 36.2071 40.7929L40.7929 36.2071C41.1834 35.8166 41.1834 35.1834 40.7929 34.7929L33.7071 27.7071C33.3166 27.3166 33.3166 26.6834 33.7071 26.2929L40.7929 19.2071C41.1834 18.8166 41.1834 18.1834 40.7929 17.7929L36.2071 13.2071C35.8166 12.8166 35.1834 12.8166 34.7929 13.2071L27.7071 20.2929C27.3166 20.6834 26.6834 20.6834 26.2929 20.2929Z"></path>\n    </svg>\n  </div>\n</div>\n'),drop:function(e){return this.element.classList.remove("dz-drag-hover")},dragstart:function(e){},dragend:function(e){return this.element.classList.remove("dz-drag-hover")},dragenter:function(e){return this.element.classList.add("dz-drag-hover")},dragover:function(e){return this.element.classList.add("dz-drag-hover")},dragleave:function(e){return this.element.classList.remove("dz-drag-hover")},paste:function(e){},reset:function(){return this.element.classList.remove("dz-started")},addedfile:function(file){if(this.element===this.previewsContainer&&this.element.classList.add("dz-started"),this.previewsContainer&&!this.options.disablePreviews){var _this=this;file.previewElement=$a601ff30f483e917$export$2e2bcd8739ae039.createElement(this.options.previewTemplate.trim()),file.previewTemplate=file.previewElement,this.previewsContainer.appendChild(file.previewElement);var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=file.previewElement.querySelectorAll("[data-dz-name]")[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var node=_step.value;node.textContent=file.name}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}var _iteratorNormalCompletion1=!0,_didIteratorError1=!1,_iteratorError1=void 0;try{for(var _step1,_iterator1=file.previewElement.querySelectorAll("[data-dz-size]")[Symbol.iterator]();!(_iteratorNormalCompletion1=(_step1=_iterator1.next()).done);_iteratorNormalCompletion1=!0)(node=_step1.value).innerHTML=this.filesize(file.size)}catch(err){_didIteratorError1=!0,_iteratorError1=err}finally{try{_iteratorNormalCompletion1||null==_iterator1.return||_iterator1.return()}finally{if(_didIteratorError1)throw _iteratorError1}}this.options.addRemoveLinks&&(file._removeLink=$a601ff30f483e917$export$2e2bcd8739ae039.createElement('<a class="dz-remove" href="javascript:undefined;" data-dz-remove>'.concat(this.options.dictRemoveFile,"</a>")),file.previewElement.appendChild(file._removeLink));var removeFileEvent=function(e){var _this1=_this;if(e.preventDefault(),e.stopPropagation(),file.status===$a601ff30f483e917$export$2e2bcd8739ae039.UPLOADING)return $a601ff30f483e917$export$2e2bcd8739ae039.confirm(_this.options.dictCancelUploadConfirmation,(function(){return _this1.removeFile(file)}));var _this2=_this;return _this.options.dictRemoveFileConfirmation?$a601ff30f483e917$export$2e2bcd8739ae039.confirm(_this.options.dictRemoveFileConfirmation,(function(){return _this2.removeFile(file)})):_this.removeFile(file)},_iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _step2,_iterator2=file.previewElement.querySelectorAll("[data-dz-remove]")[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){_step2.value.addEventListener("click",removeFileEvent)}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{_iteratorNormalCompletion2||null==_iterator2.return||_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}}},removedfile:function(file){return null!=file.previewElement&&null!=file.previewElement.parentNode&&file.previewElement.parentNode.removeChild(file.previewElement),this._updateMaxFilesReachedClass()},thumbnail:function(file,dataUrl){if(file.previewElement){file.previewElement.classList.remove("dz-file-preview");var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=file.previewElement.querySelectorAll("[data-dz-thumbnail]")[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var thumbnailElement=_step.value;thumbnailElement.alt=file.name,thumbnailElement.src=dataUrl}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return setTimeout((function(){return file.previewElement.classList.add("dz-image-preview")}),1)}},error:function(file,message){if(file.previewElement){file.previewElement.classList.add("dz-error"),"string"!=typeof message&&message.error&&(message=message.error);var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=file.previewElement.querySelectorAll("[data-dz-errormessage]")[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){_step.value.textContent=message}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}}},errormultiple:function(){},processing:function(file){if(file.previewElement&&(file.previewElement.classList.add("dz-processing"),file._removeLink))return file._removeLink.innerHTML=this.options.dictCancelUpload},processingmultiple:function(){},uploadprogress:function(file,progress,bytesSent){var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;if(file.previewElement)try{for(var _step,_iterator=file.previewElement.querySelectorAll("[data-dz-uploadprogress]")[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var node=_step.value;"PROGRESS"===node.nodeName?node.value=progress:node.style.width="".concat(progress,"%")}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}},totaluploadprogress:function(){},sending:function(){},sendingmultiple:function(){},success:function(file){if(file.previewElement)return file.previewElement.classList.add("dz-success")},successmultiple:function(){},canceled:function(file){return this.emit("error",file,this.options.dictUploadCanceled)},canceledmultiple:function(){},complete:function(file){if(file._removeLink&&(file._removeLink.innerHTML=this.options.dictRemoveFile),file.previewElement)return file.previewElement.classList.add("dz-complete")},completemultiple:function(){},maxfilesexceeded:function(){},maxfilesreached:function(){},queuecomplete:function(){},addedfiles:function(){}},$b657c03155fc27e2$export$2e2bcd8739ae039=$b657c03155fc27e2$var$defaultOptions,$a601ff30f483e917$export$2e2bcd8739ae039=function(Emitter){"use strict";function $a601ff30f483e917$export$2e2bcd8739ae039(el,options){var _this,fallback,left;if($6mU8w$swchelpers.classCallCheck(this,$a601ff30f483e917$export$2e2bcd8739ae039),(_this=$6mU8w$swchelpers.possibleConstructorReturn(this,$6mU8w$swchelpers.getPrototypeOf($a601ff30f483e917$export$2e2bcd8739ae039).call(this))).element=el,_this.clickableElements=[],_this.listeners=[],_this.files=[],"string"==typeof _this.element&&(_this.element=document.querySelector(_this.element)),!_this.element||null==_this.element.nodeType)throw new Error("Invalid dropzone element.");if(_this.element.dropzone)throw new Error("Dropzone already attached.");$a601ff30f483e917$export$2e2bcd8739ae039.instances.push($6mU8w$swchelpers.assertThisInitialized(_this)),_this.element.dropzone=$6mU8w$swchelpers.assertThisInitialized(_this);var elementOptions=null!=(left=$a601ff30f483e917$export$2e2bcd8739ae039.optionsForElement(_this.element))?left:{};if(_this.options=$parcel$interopDefault($6mU8w$justextend)(!0,{},$b657c03155fc27e2$export$2e2bcd8739ae039,elementOptions,null!=options?options:{}),_this.options.previewTemplate=_this.options.previewTemplate.replace(/\n*/g,""),_this.options.forceFallback||!$a601ff30f483e917$export$2e2bcd8739ae039.isBrowserSupported())return $6mU8w$swchelpers.possibleConstructorReturn(_this,_this.options.fallback.call($6mU8w$swchelpers.assertThisInitialized(_this)));if(null==_this.options.url&&(_this.options.url=_this.element.getAttribute("action")),!_this.options.url)throw new Error("No URL provided.");if(_this.options.acceptedFiles&&_this.options.acceptedMimeTypes)throw new Error("You can't provide both 'acceptedFiles' and 'acceptedMimeTypes'. 'acceptedMimeTypes' is deprecated.");if(_this.options.uploadMultiple&&_this.options.chunking)throw new Error("You cannot set both: uploadMultiple and chunking.");if(_this.options.binaryBody&&_this.options.uploadMultiple)throw new Error("You cannot set both: binaryBody and uploadMultiple.");return _this.options.acceptedMimeTypes&&(_this.options.acceptedFiles=_this.options.acceptedMimeTypes,delete _this.options.acceptedMimeTypes),null!=_this.options.renameFilename&&(_this.options.renameFile=function(file){return _this.options.renameFilename.call($6mU8w$swchelpers.assertThisInitialized(_this),file.name,file)}),"string"==typeof _this.options.method&&(_this.options.method=_this.options.method.toUpperCase()),(fallback=_this.getExistingFallback())&&fallback.parentNode&&fallback.parentNode.removeChild(fallback),!1!==_this.options.previewsContainer&&(_this.options.previewsContainer?_this.previewsContainer=$a601ff30f483e917$export$2e2bcd8739ae039.getElement(_this.options.previewsContainer,"previewsContainer"):_this.previewsContainer=_this.element),_this.options.clickable&&(!0===_this.options.clickable?_this.clickableElements=[_this.element]:_this.clickableElements=$a601ff30f483e917$export$2e2bcd8739ae039.getElements(_this.options.clickable,"clickable")),_this.init(),_this}return $6mU8w$swchelpers.inherits($a601ff30f483e917$export$2e2bcd8739ae039,Emitter),$6mU8w$swchelpers.createClass($a601ff30f483e917$export$2e2bcd8739ae039,[{key:"getAcceptedFiles",value:function(){return this.files.filter((function(file){return file.accepted})).map((function(file){return file}))}},{key:"getRejectedFiles",value:function(){return this.files.filter((function(file){return!file.accepted})).map((function(file){return file}))}},{key:"getFilesWithStatus",value:function(status){return this.files.filter((function(file){return file.status===status})).map((function(file){return file}))}},{key:"getQueuedFiles",value:function(){return this.getFilesWithStatus($a601ff30f483e917$export$2e2bcd8739ae039.QUEUED)}},{key:"getUploadingFiles",value:function(){return this.getFilesWithStatus($a601ff30f483e917$export$2e2bcd8739ae039.UPLOADING)}},{key:"getAddedFiles",value:function(){return this.getFilesWithStatus($a601ff30f483e917$export$2e2bcd8739ae039.ADDED)}},{key:"getActiveFiles",value:function(){return this.files.filter((function(file){return file.status===$a601ff30f483e917$export$2e2bcd8739ae039.UPLOADING||file.status===$a601ff30f483e917$export$2e2bcd8739ae039.QUEUED})).map((function(file){return file}))}},{key:"init",value:function(){var _this12=this,_this1=this,_this2=this,_this3=this,_this4=this,_this5=this,_this6=this,_this7=this,_this8=this,_this9=this,_this10=this;if("form"===this.element.tagName&&this.element.setAttribute("enctype","multipart/form-data"),this.element.classList.contains("dropzone")&&!this.element.querySelector(".dz-message")&&this.element.appendChild($a601ff30f483e917$export$2e2bcd8739ae039.createElement('<div class="dz-default dz-message"><button class="dz-button" type="button">'.concat(this.options.dictDefaultMessage,"</button></div>"))),this.clickableElements.length){var _this=this,setupHiddenFileInput=function(){var _this11=_this;_this.hiddenFileInput&&_this.hiddenFileInput.parentNode.removeChild(_this.hiddenFileInput),_this.hiddenFileInput=document.createElement("input"),_this.hiddenFileInput.setAttribute("type","file"),(null===_this.options.maxFiles||_this.options.maxFiles>1)&&_this.hiddenFileInput.setAttribute("multiple","multiple"),_this.hiddenFileInput.className="dz-hidden-input",null!==_this.options.acceptedFiles&&_this.hiddenFileInput.setAttribute("accept",_this.options.acceptedFiles),null!==_this.options.capture&&_this.hiddenFileInput.setAttribute("capture",_this.options.capture),_this.hiddenFileInput.setAttribute("tabindex","-1"),_this.hiddenFileInput.style.visibility="hidden",_this.hiddenFileInput.style.position="absolute",_this.hiddenFileInput.style.top="0",_this.hiddenFileInput.style.left="0",_this.hiddenFileInput.style.height="0",_this.hiddenFileInput.style.width="0",$a601ff30f483e917$export$2e2bcd8739ae039.getElement(_this.options.hiddenInputContainer,"hiddenInputContainer").appendChild(_this.hiddenFileInput),_this.hiddenFileInput.addEventListener("change",(function(){var files=_this11.hiddenFileInput.files,_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;if(files.length)try{for(var _step,_iterator=files[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var file=_step.value;_this11.addFile(file)}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}_this11.emit("addedfiles",files),setupHiddenFileInput()}))};setupHiddenFileInput()}this.URL=null!==window.URL?window.URL:window.webkitURL;var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=this.events[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var eventName=_step.value;this.on(eventName,this.options[eventName])}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}this.on("uploadprogress",(function(){return _this12.updateTotalUploadProgress()})),this.on("removedfile",(function(){return _this1.updateTotalUploadProgress()})),this.on("canceled",(function(file){return _this2.emit("complete",file)})),this.on("complete",(function(file){var _this11=_this3;if(0===_this3.getAddedFiles().length&&0===_this3.getUploadingFiles().length&&0===_this3.getQueuedFiles().length)return setTimeout((function(){return _this11.emit("queuecomplete")}),0)}));var noPropagation=function(e){if(function(e){if(e.dataTransfer.types)for(var i=0;i<e.dataTransfer.types.length;i++)if("Files"===e.dataTransfer.types[i])return!0;return!1}(e))return e.stopPropagation(),e.preventDefault?e.preventDefault():e.returnValue=!1};return this.listeners=[{element:this.element,events:{dragstart:function(e){return _this4.emit("dragstart",e)},dragenter:function(e){return noPropagation(e),_this5.emit("dragenter",e)},dragover:function(e){var efct;try{efct=e.dataTransfer.effectAllowed}catch(error){}return e.dataTransfer.dropEffect="move"===efct||"linkMove"===efct?"move":"copy",noPropagation(e),_this6.emit("dragover",e)},dragleave:function(e){return _this7.emit("dragleave",e)},drop:function(e){return noPropagation(e),_this8.drop(e)},dragend:function(e){return _this9.emit("dragend",e)}}}],this.clickableElements.forEach((function(clickableElement){var _this11=_this10;return _this10.listeners.push({element:clickableElement,events:{click:function(evt){return(clickableElement!==_this11.element||evt.target===_this11.element||$a601ff30f483e917$export$2e2bcd8739ae039.elementInside(evt.target,_this11.element.querySelector(".dz-message")))&&_this11.hiddenFileInput.click(),!0}}})})),this.enable(),this.options.init.call(this)}},{key:"destroy",value:function(){return this.disable(),this.removeAllFiles(!0),(null!=this.hiddenFileInput?this.hiddenFileInput.parentNode:void 0)&&(this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput),this.hiddenFileInput=null),delete this.element.dropzone,$a601ff30f483e917$export$2e2bcd8739ae039.instances.splice($a601ff30f483e917$export$2e2bcd8739ae039.instances.indexOf(this),1)}},{key:"updateTotalUploadProgress",value:function(){var totalUploadProgress,totalBytesSent=0,totalBytes=0;if(this.getActiveFiles().length){var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=this.getActiveFiles()[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var file=_step.value;totalBytesSent+=file.upload.bytesSent,totalBytes+=file.upload.total}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}totalUploadProgress=100*totalBytesSent/totalBytes}else totalUploadProgress=100;return this.emit("totaluploadprogress",totalUploadProgress,totalBytes,totalBytesSent)}},{key:"_getParamName",value:function(n){return"function"==typeof this.options.paramName?this.options.paramName(n):"".concat(this.options.paramName).concat(this.options.uploadMultiple?"[".concat(n,"]"):"")}},{key:"_renameFile",value:function(file){return"function"!=typeof this.options.renameFile?file.name:this.options.renameFile(file)}},{key:"getFallbackForm",value:function(){var existingFallback,form;if(existingFallback=this.getExistingFallback())return existingFallback;var fieldsString='<div class="dz-fallback">';this.options.dictFallbackText&&(fieldsString+="<p>".concat(this.options.dictFallbackText,"</p>")),fieldsString+='<input type="file" name="'.concat(this._getParamName(0),'" ').concat(this.options.uploadMultiple?'multiple="multiple"':void 0,' /><input type="submit" value="Upload!"></div>');var fields=$a601ff30f483e917$export$2e2bcd8739ae039.createElement(fieldsString);return"FORM"!==this.element.tagName?(form=$a601ff30f483e917$export$2e2bcd8739ae039.createElement('<form action="'.concat(this.options.url,'" enctype="multipart/form-data" method="').concat(this.options.method,'"></form>'))).appendChild(fields):(this.element.setAttribute("enctype","multipart/form-data"),this.element.setAttribute("method",this.options.method)),null!=form?form:fields}},{key:"getExistingFallback",value:function(){var getFallback=function(elements){var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=elements[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var el=_step.value;if(/(^| )fallback($| )/.test(el.className))return el}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}},_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=["div","form"][Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var fallback,tagName=_step.value;if(fallback=getFallback(this.element.getElementsByTagName(tagName)))return fallback}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}}},{key:"setupEventListeners",value:function(){return this.listeners.map((function(elementListeners){return function(){var result=[];for(var event in elementListeners.events){var listener=elementListeners.events[event];result.push(elementListeners.element.addEventListener(event,listener,!1))}return result}()}))}},{key:"removeEventListeners",value:function(){return this.listeners.map((function(elementListeners){return function(){var result=[];for(var event in elementListeners.events){var listener=elementListeners.events[event];result.push(elementListeners.element.removeEventListener(event,listener,!1))}return result}()}))}},{key:"disable",value:function(){var _this=this;return this.clickableElements.forEach((function(element){return element.classList.remove("dz-clickable")})),this.removeEventListeners(),this.disabled=!0,this.files.map((function(file){return _this.cancelUpload(file)}))}},{key:"enable",value:function(){return delete this.disabled,this.clickableElements.forEach((function(element){return element.classList.add("dz-clickable")})),this.setupEventListeners()}},{key:"filesize",value:function(size){var selectedSize=0,selectedUnit="b";if(size>0){for(var units=["tb","gb","mb","kb","b"],i=0;i<units.length;i++){var unit=units[i];if(size>=Math.pow(this.options.filesizeBase,4-i)/10){selectedSize=size/Math.pow(this.options.filesizeBase,4-i),selectedUnit=unit;break}}selectedSize=Math.round(10*selectedSize)/10}return" <strong> ".concat(selectedSize,"</strong> ").concat(this.options.dictFileSizeUnits[selectedUnit])}},{key:"_updateMaxFilesReachedClass",value:function(){return null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(this.getAcceptedFiles().length===this.options.maxFiles&&this.emit("maxfilesreached",this.files),this.element.classList.add("dz-max-files-reached")):this.element.classList.remove("dz-max-files-reached")}},{key:"drop",value:function(e){if(e.dataTransfer){this.emit("drop",e);for(var files=[],i=0;i<e.dataTransfer.files.length;i++)files[i]=e.dataTransfer.files[i];if(files.length){var items=e.dataTransfer.items;items&&items.length&&null!=items[0].webkitGetAsEntry?this._addFilesFromItems(items):this.handleFiles(files)}this.emit("addedfiles",files)}}},{key:"paste",value:function(e){if(null!=$a601ff30f483e917$var$__guard__(null!=e?e.clipboardData:void 0,(function(x){return x.items}))){this.emit("paste",e);var items=e.clipboardData.items;return items.length?this._addFilesFromItems(items):void 0}}},{key:"handleFiles",value:function(files){var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=files[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var file=_step.value;this.addFile(file)}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}}},{key:"_addFilesFromItems",value:function(items){var _this=this;return function(){var result=[],_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=items[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var entry,item=_step.value;null!=item.webkitGetAsEntry&&(entry=item.webkitGetAsEntry())?entry.isFile?result.push(_this.addFile(item.getAsFile())):entry.isDirectory?result.push(_this._addFilesFromDirectory(entry,entry.name)):result.push(void 0):null!=item.getAsFile&&(null==item.kind||"file"===item.kind)?result.push(_this.addFile(item.getAsFile())):result.push(void 0)}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return result}()}},{key:"_addFilesFromDirectory",value:function(directory,path){var _this=this,dirReader=directory.createReader(),errorHandler=function(error){return $a601ff30f483e917$var$__guardMethod__(console,"log",(function(o){return o.log(error)}))},readEntries=function(){var _this1=_this;return dirReader.readEntries((function(entries){if(entries.length>0){var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=entries[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var entry=_step.value,_this2=_this1;entry.isFile?entry.file((function(file){if(!_this2.options.ignoreHiddenFiles||"."!==file.name.substring(0,1))return file.fullPath="".concat(path,"/").concat(file.name),_this2.addFile(file)})):entry.isDirectory&&_this1._addFilesFromDirectory(entry,"".concat(path,"/").concat(entry.name))}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}readEntries()}return null}),errorHandler)};return readEntries()}},{key:"accept",value:function(file,done){this.options.maxFilesize&&file.size>1048576*this.options.maxFilesize?done(this.options.dictFileTooBig.replace("{{filesize}}",Math.round(file.size/1024/10.24)/100).replace("{{maxFilesize}}",this.options.maxFilesize)):$a601ff30f483e917$export$2e2bcd8739ae039.isValidFile(file,this.options.acceptedFiles)?null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(done(this.options.dictMaxFilesExceeded.replace("{{maxFiles}}",this.options.maxFiles)),this.emit("maxfilesexceeded",file)):this.options.accept.call(this,file,done):done(this.options.dictInvalidFileType)}},{key:"addFile",value:function(file){var _this=this;file.upload={uuid:$a601ff30f483e917$export$2e2bcd8739ae039.uuidv4(),progress:0,total:file.size,bytesSent:0,filename:this._renameFile(file)},this.files.push(file),file.status=$a601ff30f483e917$export$2e2bcd8739ae039.ADDED,this.emit("addedfile",file),this._enqueueThumbnail(file),this.accept(file,(function(error){error?(file.accepted=!1,_this._errorProcessing([file],error)):(file.accepted=!0,_this.options.autoQueue&&_this.enqueueFile(file)),_this._updateMaxFilesReachedClass()}))}},{key:"enqueueFiles",value:function(files){var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=files[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var file=_step.value;this.enqueueFile(file)}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return null}},{key:"enqueueFile",value:function(file){if(file.status!==$a601ff30f483e917$export$2e2bcd8739ae039.ADDED||!0!==file.accepted)throw new Error("This file can't be queued because it has already been processed or was rejected.");var _this=this;if(file.status=$a601ff30f483e917$export$2e2bcd8739ae039.QUEUED,this.options.autoProcessQueue)return setTimeout((function(){return _this.processQueue()}),0)}},{key:"_enqueueThumbnail",value:function(file){if(this.options.createImageThumbnails&&file.type.match(/image.*/)&&file.size<=1048576*this.options.maxThumbnailFilesize){var _this=this;return this._thumbnailQueue.push(file),setTimeout((function(){return _this._processThumbnailQueue()}),0)}}},{key:"_processThumbnailQueue",value:function(){var _this=this;if(!this._processingThumbnail&&0!==this._thumbnailQueue.length){this._processingThumbnail=!0;var file=this._thumbnailQueue.shift();return this.createThumbnail(file,this.options.thumbnailWidth,this.options.thumbnailHeight,this.options.thumbnailMethod,!0,(function(dataUrl){return _this.emit("thumbnail",file,dataUrl),_this._processingThumbnail=!1,_this._processThumbnailQueue()}))}}},{key:"removeFile",value:function(file){if(file.status===$a601ff30f483e917$export$2e2bcd8739ae039.UPLOADING&&this.cancelUpload(file),this.files=$a601ff30f483e917$var$without(this.files,file),this.emit("removedfile",file),0===this.files.length)return this.emit("reset")}},{key:"removeAllFiles",value:function(cancelIfNecessary){null==cancelIfNecessary&&(cancelIfNecessary=!1);var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=this.files.slice()[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var file=_step.value;(file.status!==$a601ff30f483e917$export$2e2bcd8739ae039.UPLOADING||cancelIfNecessary)&&this.removeFile(file)}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return null}},{key:"resizeImage",value:function(file,width,height,resizeMethod,callback){var _this=this;return this.createThumbnail(file,width,height,resizeMethod,!0,(function(dataUrl,canvas){if(null==canvas)return callback(file);var resizeMimeType=_this.options.resizeMimeType;null==resizeMimeType&&(resizeMimeType=file.type);var resizedDataURL=canvas.toDataURL(resizeMimeType,_this.options.resizeQuality);return"image/jpeg"!==resizeMimeType&&"image/jpg"!==resizeMimeType||(resizedDataURL=$a601ff30f483e917$var$ExifRestore.restore(file.dataURL,resizedDataURL)),callback($a601ff30f483e917$export$2e2bcd8739ae039.dataURItoBlob(resizedDataURL))}))}},{key:"createThumbnail",value:function(file,width,height,resizeMethod,fixOrientation,callback){var _this=this,fileReader=new FileReader;fileReader.onload=function(){file.dataURL=fileReader.result,"image/svg+xml"!==file.type?_this.createThumbnailFromUrl(file,width,height,resizeMethod,fixOrientation,callback):null!=callback&&callback(fileReader.result)},fileReader.readAsDataURL(file)}},{key:"displayExistingFile",value:function(mockFile,imageUrl,callback,crossOrigin,param){var resizeThumbnail=void 0===param||param;if(this.emit("addedfile",mockFile),this.emit("complete",mockFile),resizeThumbnail){var _this=this;mockFile.dataURL=imageUrl,this.createThumbnailFromUrl(mockFile,this.options.thumbnailWidth,this.options.thumbnailHeight,this.options.thumbnailMethod,this.options.fixOrientation,(function(thumbnail){_this.emit("thumbnail",mockFile,thumbnail),callback&&callback()}),crossOrigin)}else this.emit("thumbnail",mockFile,imageUrl),callback&&callback()}},{key:"createThumbnailFromUrl",value:function(file,width,height,resizeMethod,fixOrientation,callback,crossOrigin){var _this=this,img=document.createElement("img");return crossOrigin&&(img.crossOrigin=crossOrigin),fixOrientation="from-image"!=getComputedStyle(document.body).imageOrientation&&fixOrientation,img.onload=function(){var _this1=_this,loadExif=function(callback){return callback(1)};return"undefined"!=typeof EXIF&&null!==EXIF&&fixOrientation&&(loadExif=function(callback){return EXIF.getData(img,(function(){return callback(EXIF.getTag(this,"Orientation"))}))}),loadExif((function(orientation){file.width=img.width,file.height=img.height;var resizeInfo=_this1.options.resize.call(_this1,file,width,height,resizeMethod),canvas=document.createElement("canvas"),ctx=canvas.getContext("2d");switch(canvas.width=resizeInfo.trgWidth,canvas.height=resizeInfo.trgHeight,orientation>4&&(canvas.width=resizeInfo.trgHeight,canvas.height=resizeInfo.trgWidth),orientation){case 2:ctx.translate(canvas.width,0),ctx.scale(-1,1);break;case 3:ctx.translate(canvas.width,canvas.height),ctx.rotate(Math.PI);break;case 4:ctx.translate(0,canvas.height),ctx.scale(1,-1);break;case 5:ctx.rotate(.5*Math.PI),ctx.scale(1,-1);break;case 6:ctx.rotate(.5*Math.PI),ctx.translate(0,-canvas.width);break;case 7:ctx.rotate(.5*Math.PI),ctx.translate(canvas.height,-canvas.width),ctx.scale(-1,1);break;case 8:ctx.rotate(-.5*Math.PI),ctx.translate(-canvas.height,0)}$a601ff30f483e917$var$drawImageIOSFix(ctx,img,null!=resizeInfo.srcX?resizeInfo.srcX:0,null!=resizeInfo.srcY?resizeInfo.srcY:0,resizeInfo.srcWidth,resizeInfo.srcHeight,null!=resizeInfo.trgX?resizeInfo.trgX:0,null!=resizeInfo.trgY?resizeInfo.trgY:0,resizeInfo.trgWidth,resizeInfo.trgHeight);var thumbnail=canvas.toDataURL("image/png");if(null!=callback)return callback(thumbnail,canvas)}))},null!=callback&&(img.onerror=callback),img.src=file.dataURL}},{key:"processQueue",value:function(){var parallelUploads=this.options.parallelUploads,processingLength=this.getUploadingFiles().length,i=processingLength;if(!(processingLength>=parallelUploads)){var queuedFiles=this.getQueuedFiles();if(queuedFiles.length>0){if(this.options.uploadMultiple)return this.processFiles(queuedFiles.slice(0,parallelUploads-processingLength));for(;i<parallelUploads;){if(!queuedFiles.length)return;this.processFile(queuedFiles.shift()),i++}}}}},{key:"processFile",value:function(file){return this.processFiles([file])}},{key:"processFiles",value:function(files){var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=files[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var file=_step.value;file.processing=!0,file.status=$a601ff30f483e917$export$2e2bcd8739ae039.UPLOADING,this.emit("processing",file)}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return this.options.uploadMultiple&&this.emit("processingmultiple",files),this.uploadFiles(files)}},{key:"_getFilesWithXhr",value:function(xhr){return this.files.filter((function(file){return file.xhr===xhr})).map((function(file){return file}))}},{key:"cancelUpload",value:function(file){if(file.status===$a601ff30f483e917$export$2e2bcd8739ae039.UPLOADING){var groupedFiles=this._getFilesWithXhr(file.xhr),_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=groupedFiles[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){(groupedFile=_step.value).status=$a601ff30f483e917$export$2e2bcd8739ae039.CANCELED}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}void 0!==file.xhr&&file.xhr.abort();var _iteratorNormalCompletion1=!0,_didIteratorError1=!1,_iteratorError1=void 0;try{for(var _step1,_iterator1=groupedFiles[Symbol.iterator]();!(_iteratorNormalCompletion1=(_step1=_iterator1.next()).done);_iteratorNormalCompletion1=!0){var groupedFile=_step1.value;this.emit("canceled",groupedFile)}}catch(err){_didIteratorError1=!0,_iteratorError1=err}finally{try{_iteratorNormalCompletion1||null==_iterator1.return||_iterator1.return()}finally{if(_didIteratorError1)throw _iteratorError1}}this.options.uploadMultiple&&this.emit("canceledmultiple",groupedFiles)}else file.status!==$a601ff30f483e917$export$2e2bcd8739ae039.ADDED&&file.status!==$a601ff30f483e917$export$2e2bcd8739ae039.QUEUED||(file.status=$a601ff30f483e917$export$2e2bcd8739ae039.CANCELED,this.emit("canceled",file),this.options.uploadMultiple&&this.emit("canceledmultiple",[file]));if(this.options.autoProcessQueue)return this.processQueue()}},{key:"resolveOption",value:function(option){for(var _len=arguments.length,args=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)args[_key-1]=arguments[_key];return"function"==typeof option?option.apply(this,args):option}},{key:"uploadFile",value:function(file){return this.uploadFiles([file])}},{key:"uploadFiles",value:function(files){var _this=this;this._transformFiles(files,(function(transformedFiles){if(_this.options.chunking){var transformedFile=transformedFiles[0];files[0].upload.chunked=_this.options.chunking&&(_this.options.forceChunking||transformedFile.size>_this.options.chunkSize),files[0].upload.totalChunkCount=Math.ceil(transformedFile.size/_this.options.chunkSize)}if(files[0].upload.chunked){var _this1=_this,_this4=_this,file=files[0];transformedFile=transformedFiles[0];file.upload.chunks=[];var handleNextChunk=function(){for(var chunkIndex=0;void 0!==file.upload.chunks[chunkIndex];)chunkIndex++;if(!(chunkIndex>=file.upload.totalChunkCount)){0;var start=chunkIndex*_this1.options.chunkSize,end=Math.min(start+_this1.options.chunkSize,transformedFile.size),dataBlock={name:_this1._getParamName(0),data:transformedFile.webkitSlice?transformedFile.webkitSlice(start,end):transformedFile.slice(start,end),filename:file.upload.filename,chunkIndex:chunkIndex};file.upload.chunks[chunkIndex]={file:file,index:chunkIndex,dataBlock:dataBlock,status:$a601ff30f483e917$export$2e2bcd8739ae039.UPLOADING,progress:0,retries:0},_this1._uploadData(files,[dataBlock])}};if(file.upload.finishedChunkUpload=function(chunk,response){var _this5=_this4,allFinished=!0;chunk.status=$a601ff30f483e917$export$2e2bcd8739ae039.SUCCESS,chunk.dataBlock=null,chunk.response=chunk.xhr.responseText,chunk.responseHeaders=chunk.xhr.getAllResponseHeaders(),chunk.xhr=null;for(var i=0;i<file.upload.totalChunkCount;i++){if(void 0===file.upload.chunks[i])return handleNextChunk();file.upload.chunks[i].status!==$a601ff30f483e917$export$2e2bcd8739ae039.SUCCESS&&(allFinished=!1)}allFinished&&_this4.options.chunksUploaded(file,(function(){_this5._finished(files,response,null)}))},_this.options.parallelChunkUploads)for(var i=0;i<file.upload.totalChunkCount;i++)handleNextChunk();else handleNextChunk()}else{var dataBlocks=[];for(i=0;i<files.length;i++)dataBlocks[i]={name:_this._getParamName(i),data:transformedFiles[i],filename:files[i].upload.filename};_this._uploadData(files,dataBlocks)}}))}},{key:"_getChunk",value:function(file,xhr){for(var i=0;i<file.upload.totalChunkCount;i++)if(void 0!==file.upload.chunks[i]&&file.upload.chunks[i].xhr===xhr)return file.upload.chunks[i]}},{key:"_uploadData",value:function(files,dataBlocks){var _this=this,_this7=this,_this8=this,_this9=this,xhr=new XMLHttpRequest,_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _iterator=files[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){(file=_step.value).xhr=xhr}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}files[0].upload.chunked&&(files[0].upload.chunks[dataBlocks[0].chunkIndex].xhr=xhr);var method=this.resolveOption(this.options.method,files,dataBlocks),url=this.resolveOption(this.options.url,files,dataBlocks);xhr.open(method,url,!0),this.resolveOption(this.options.timeout,files)&&(xhr.timeout=this.resolveOption(this.options.timeout,files)),xhr.withCredentials=!!this.options.withCredentials,xhr.onload=function(e){_this._finishedUploading(files,xhr,e)},xhr.ontimeout=function(){_this7._handleUploadError(files,xhr,"Request timedout after ".concat(_this7.options.timeout/1e3," seconds"))},xhr.onerror=function(){_this8._handleUploadError(files,xhr)},(null!=xhr.upload?xhr.upload:xhr).onprogress=function(e){return _this9._updateFilesUploadProgress(files,xhr,e)};var headers=this.options.defaultHeaders?{Accept:"application/json","Cache-Control":"no-cache","X-Requested-With":"XMLHttpRequest"}:{};for(var headerName in this.options.binaryBody&&(headers["Content-Type"]=files[0].type),this.options.headers&&$parcel$interopDefault($6mU8w$justextend)(headers,this.options.headers),headers){var headerValue=headers[headerName];headerValue&&xhr.setRequestHeader(headerName,headerValue)}if(this.options.binaryBody){_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(_iterator=files[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var file=_step.value;this.emit("sending",file,xhr)}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}this.options.uploadMultiple&&this.emit("sendingmultiple",files,xhr),this.submitRequest(xhr,null,files)}else{var formData=new FormData;if(this.options.params){var additionalParams=this.options.params;for(var key in"function"==typeof additionalParams&&(additionalParams=additionalParams.call(this,files,xhr,files[0].upload.chunked?this._getChunk(files[0],xhr):null)),additionalParams){var value=additionalParams[key];if(Array.isArray(value))for(var i=0;i<value.length;i++)formData.append(key,value[i]);else formData.append(key,value)}}_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{var _step;for(_iterator=files[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){file=_step.value;this.emit("sending",file,xhr,formData)}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}this.options.uploadMultiple&&this.emit("sendingmultiple",files,xhr,formData),this._addFormElementData(formData);for(i=0;i<dataBlocks.length;i++){var dataBlock=dataBlocks[i];formData.append(dataBlock.name,dataBlock.data,dataBlock.filename)}this.submitRequest(xhr,formData,files)}}},{key:"_transformFiles",value:function(files,done){for(var _this=this,_loop=function(i){_this.options.transformFile.call(_this,files[i],(function(transformedFile){transformedFiles[i]=transformedFile,++doneCounter===files.length&&done(transformedFiles)}))},transformedFiles=[],doneCounter=0,i=0;i<files.length;i++)_loop(i)}},{key:"_addFormElementData",value:function(formData){var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;if("FORM"===this.element.tagName)try{for(var _iterator=this.element.querySelectorAll("input, textarea, select, button")[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var input=_step.value,inputName=input.getAttribute("name"),inputType=input.getAttribute("type");if(inputType&&(inputType=inputType.toLowerCase()),null!=inputName)if("SELECT"===input.tagName&&input.hasAttribute("multiple")){_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{var _step;for(_iterator=input.options[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var option=_step.value;option.selected&&formData.append(inputName,option.value)}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}}else(!inputType||"checkbox"!==inputType&&"radio"!==inputType||input.checked)&&formData.append(inputName,input.value)}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}}},{key:"_updateFilesUploadProgress",value:function(files,xhr,e){var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;if(files[0].upload.chunked){file=files[0];var chunk=this._getChunk(file,xhr);e?(chunk.progress=100*e.loaded/e.total,chunk.total=e.total,chunk.bytesSent=e.loaded):(chunk.progress=100,chunk.bytesSent=chunk.total),file.upload.progress=0,file.upload.total=0,file.upload.bytesSent=0;for(var i=0;i<file.upload.totalChunkCount;i++)file.upload.chunks[i]&&void 0!==file.upload.chunks[i].progress&&(file.upload.progress+=file.upload.chunks[i].progress,file.upload.total+=file.upload.chunks[i].total,file.upload.bytesSent+=file.upload.chunks[i].bytesSent);file.upload.progress=file.upload.progress/file.upload.totalChunkCount,this.emit("uploadprogress",file,file.upload.progress,file.upload.bytesSent)}else try{for(var _step,_iterator=files[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var file;(file=_step.value).upload.total&&file.upload.bytesSent&&file.upload.bytesSent==file.upload.total||(e?(file.upload.progress=100*e.loaded/e.total,file.upload.total=e.total,file.upload.bytesSent=e.loaded):(file.upload.progress=100,file.upload.bytesSent=file.upload.total),this.emit("uploadprogress",file,file.upload.progress,file.upload.bytesSent))}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}}},{key:"_finishedUploading",value:function(files,xhr,e){var response;if(files[0].status!==$a601ff30f483e917$export$2e2bcd8739ae039.CANCELED&&4===xhr.readyState){if("arraybuffer"!==xhr.responseType&&"blob"!==xhr.responseType&&(response=xhr.responseText,xhr.getResponseHeader("content-type")&&~xhr.getResponseHeader("content-type").indexOf("application/json")))try{response=JSON.parse(response)}catch(error){e=error,response="Invalid JSON response from server."}this._updateFilesUploadProgress(files,xhr),200<=xhr.status&&xhr.status<300?files[0].upload.chunked?files[0].upload.finishedChunkUpload(this._getChunk(files[0],xhr),response):this._finished(files,response,e):this._handleUploadError(files,xhr,response)}}},{key:"_handleUploadError",value:function(files,xhr,response){if(files[0].status!==$a601ff30f483e917$export$2e2bcd8739ae039.CANCELED){if(files[0].upload.chunked&&this.options.retryChunks){var chunk=this._getChunk(files[0],xhr);if(chunk.retries++<this.options.retryChunksLimit)return void this._uploadData(files,[chunk.dataBlock]);console.warn("Retried this chunk too often. Giving up.")}this._errorProcessing(files,response||this.options.dictResponseError.replace("{{statusCode}}",xhr.status),xhr)}}},{key:"submitRequest",value:function(xhr,formData,files){if(1==xhr.readyState)if(this.options.binaryBody)if(files[0].upload.chunked){var chunk=this._getChunk(files[0],xhr);xhr.send(chunk.dataBlock.data)}else xhr.send(files[0]);else xhr.send(formData);else console.warn("Cannot send this request because the XMLHttpRequest.readyState is not OPENED.")}},{key:"_finished",value:function(files,responseText,e){var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=files[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var file=_step.value;file.status=$a601ff30f483e917$export$2e2bcd8739ae039.SUCCESS,this.emit("success",file,responseText,e),this.emit("complete",file)}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}if(this.options.uploadMultiple&&(this.emit("successmultiple",files,responseText,e),this.emit("completemultiple",files)),this.options.autoProcessQueue)return this.processQueue()}},{key:"_errorProcessing",value:function(files,message,xhr){var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=files[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var file=_step.value;file.status=$a601ff30f483e917$export$2e2bcd8739ae039.ERROR,this.emit("error",file,message,xhr),this.emit("complete",file)}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}if(this.options.uploadMultiple&&(this.emit("errormultiple",files,message,xhr),this.emit("completemultiple",files)),this.options.autoProcessQueue)return this.processQueue()}}],[{key:"initClass",value:function(){this.prototype.Emitter=$b1d17cfb1d15c36a$export$2e2bcd8739ae039,this.prototype.events=["drop","dragstart","dragend","dragenter","dragover","dragleave","addedfile","addedfiles","removedfile","thumbnail","error","errormultiple","processing","processingmultiple","uploadprogress","totaluploadprogress","sending","sendingmultiple","success","successmultiple","canceled","canceledmultiple","complete","completemultiple","reset","maxfilesexceeded","maxfilesreached","queuecomplete"],this.prototype._thumbnailQueue=[],this.prototype._processingThumbnail=!1}},{key:"uuidv4",value:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(c){var r=16*Math.random()|0;return("x"===c?r:3&r|8).toString(16)}))}}]),$a601ff30f483e917$export$2e2bcd8739ae039}($b1d17cfb1d15c36a$export$2e2bcd8739ae039);$a601ff30f483e917$export$2e2bcd8739ae039.initClass(),$a601ff30f483e917$export$2e2bcd8739ae039.options={},$a601ff30f483e917$export$2e2bcd8739ae039.optionsForElement=function(element){return element.getAttribute("id")?$a601ff30f483e917$export$2e2bcd8739ae039.options[$a601ff30f483e917$var$camelize(element.getAttribute("id"))]:void 0},$a601ff30f483e917$export$2e2bcd8739ae039.instances=[],$a601ff30f483e917$export$2e2bcd8739ae039.forElement=function(element){if("string"==typeof element&&(element=document.querySelector(element)),null==(null!=element?element.dropzone:void 0))throw new Error("No Dropzone found for given element. This is probably because you're trying to access it before Dropzone had the time to initialize. Use the `init` option to setup any additional observers on your Dropzone.");return element.dropzone},$a601ff30f483e917$export$2e2bcd8739ae039.discover=function(){var dropzones;if(document.querySelectorAll)dropzones=document.querySelectorAll(".dropzone");else{dropzones=[];var checkElements=function(elements){return function(){var result=[],_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=elements[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var el=_step.value;/(^| )dropzone($| )/.test(el.className)?result.push(dropzones.push(el)):result.push(void 0)}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return result}()};checkElements(document.getElementsByTagName("div")),checkElements(document.getElementsByTagName("form"))}return function(){var result=[],_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=dropzones[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var dropzone=_step.value;!1!==$a601ff30f483e917$export$2e2bcd8739ae039.optionsForElement(dropzone)?result.push(new $a601ff30f483e917$export$2e2bcd8739ae039(dropzone)):result.push(void 0)}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return result}()},$a601ff30f483e917$export$2e2bcd8739ae039.blockedBrowsers=[/opera.*(Macintosh|Windows Phone).*version\/12/i],$a601ff30f483e917$export$2e2bcd8739ae039.isBrowserSupported=function(){var capableBrowser=!0;if(window.File&&window.FileReader&&window.FileList&&window.Blob&&window.FormData&&document.querySelector)if("classList"in document.createElement("a")){void 0!==$a601ff30f483e917$export$2e2bcd8739ae039.blacklistedBrowsers&&($a601ff30f483e917$export$2e2bcd8739ae039.blockedBrowsers=$a601ff30f483e917$export$2e2bcd8739ae039.blacklistedBrowsers);var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=$a601ff30f483e917$export$2e2bcd8739ae039.blockedBrowsers[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){_step.value.test(navigator.userAgent)&&(capableBrowser=!1)}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}}else capableBrowser=!1;else capableBrowser=!1;return capableBrowser},$a601ff30f483e917$export$2e2bcd8739ae039.dataURItoBlob=function(dataURI){for(var byteString=atob(dataURI.split(",")[1]),mimeString=dataURI.split(",")[0].split(":")[1].split(";")[0],ab=new ArrayBuffer(byteString.length),ia=new Uint8Array(ab),i=0,end=byteString.length,asc=0<=end;asc?i<=end:i>=end;asc?i++:i--)ia[i]=byteString.charCodeAt(i);return new Blob([ab],{type:mimeString})};var $a601ff30f483e917$var$without=function(list,rejectedItem){return list.filter((function(item){return item!==rejectedItem})).map((function(item){return item}))},$a601ff30f483e917$var$camelize=function(str){return str.replace(/[\-_](\w)/g,(function(match){return match.charAt(1).toUpperCase()}))};$a601ff30f483e917$export$2e2bcd8739ae039.createElement=function(string){var div=document.createElement("div");return div.innerHTML=string,div.childNodes[0]},$a601ff30f483e917$export$2e2bcd8739ae039.elementInside=function(element,container){if(element===container)return!0;for(;element=element.parentNode;)if(element===container)return!0;return!1},$a601ff30f483e917$export$2e2bcd8739ae039.getElement=function(el,name){var element;if("string"==typeof el?element=document.querySelector(el):null!=el.nodeType&&(element=el),null==element)throw new Error("Invalid `".concat(name,"` option provided. Please provide a CSS selector or a plain HTML element."));return element},$a601ff30f483e917$export$2e2bcd8739ae039.getElements=function(els,name){var el,elements;if(els instanceof Array){elements=[];try{var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _iterator=els[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0)el=_step.value,elements.push(this.getElement(el,name))}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}}catch(e){elements=null}}else if("string"==typeof els){elements=[];_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{var _step;for(_iterator=document.querySelectorAll(els)[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0)el=_step.value,elements.push(el)}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}}else null!=els.nodeType&&(elements=[els]);if(null==elements||!elements.length)throw new Error("Invalid `".concat(name,"` option provided. Please provide a CSS selector, a plain HTML element or a list of those."));return elements},$a601ff30f483e917$export$2e2bcd8739ae039.confirm=function(question,accepted,rejected){return window.confirm(question)?accepted():null!=rejected?rejected():void 0},$a601ff30f483e917$export$2e2bcd8739ae039.isValidFile=function(file,acceptedFiles){if(!acceptedFiles)return!0;acceptedFiles=acceptedFiles.split(",");var mimeType=file.type,baseMimeType=mimeType.replace(/\/.*$/,""),_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=acceptedFiles[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var validType=_step.value;if("."===(validType=validType.trim()).charAt(0)){if(-1!==file.name.toLowerCase().indexOf(validType.toLowerCase(),file.name.length-validType.length))return!0}else if(/\/\*$/.test(validType)){if(baseMimeType===validType.replace(/\/.*$/,""))return!0}else if(mimeType===validType)return!0}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return!1},"undefined"!=typeof jQuery&&null!==jQuery&&(jQuery.fn.dropzone=function(options){return this.each((function(){return new $a601ff30f483e917$export$2e2bcd8739ae039(this,options)}))}),$a601ff30f483e917$export$2e2bcd8739ae039.ADDED="added",$a601ff30f483e917$export$2e2bcd8739ae039.QUEUED="queued",$a601ff30f483e917$export$2e2bcd8739ae039.ACCEPTED=$a601ff30f483e917$export$2e2bcd8739ae039.QUEUED,$a601ff30f483e917$export$2e2bcd8739ae039.UPLOADING="uploading",$a601ff30f483e917$export$2e2bcd8739ae039.PROCESSING=$a601ff30f483e917$export$2e2bcd8739ae039.UPLOADING,$a601ff30f483e917$export$2e2bcd8739ae039.CANCELED="canceled",$a601ff30f483e917$export$2e2bcd8739ae039.ERROR="error",$a601ff30f483e917$export$2e2bcd8739ae039.SUCCESS="success";var $a601ff30f483e917$var$detectVerticalSquash=function(img){img.naturalWidth;var ih=img.naturalHeight,canvas=document.createElement("canvas");canvas.width=1,canvas.height=ih;var ctx=canvas.getContext("2d");ctx.drawImage(img,0,0);for(var data=ctx.getImageData(1,0,1,ih).data,sy=0,ey=ih,py=ih;py>sy;){0===data[4*(py-1)+3]?ey=py:sy=py,py=ey+sy>>1}var ratio=py/ih;return 0===ratio?1:ratio},$a601ff30f483e917$var$drawImageIOSFix=function(ctx,img,sx,sy,sw,sh,dx,dy,dw,dh){var vertSquashRatio=$a601ff30f483e917$var$detectVerticalSquash(img);return ctx.drawImage(img,sx,sy,sw,sh,dx,dy,dw,dh/vertSquashRatio)},$a601ff30f483e917$var$ExifRestore=function(){"use strict";function $a601ff30f483e917$var$ExifRestore(){$6mU8w$swchelpers.classCallCheck(this,$a601ff30f483e917$var$ExifRestore)}return $6mU8w$swchelpers.createClass($a601ff30f483e917$var$ExifRestore,null,[{key:"initClass",value:function(){this.KEY_STR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}},{key:"encode64",value:function(input){for(var output="",chr1=void 0,chr2=void 0,chr3="",enc1=void 0,enc2=void 0,enc3=void 0,enc4="",i=0;enc1=(chr1=input[i++])>>2,enc2=(3&chr1)<<4|(chr2=input[i++])>>4,enc3=(15&chr2)<<2|(chr3=input[i++])>>6,enc4=63&chr3,isNaN(chr2)?enc3=enc4=64:isNaN(chr3)&&(enc4=64),output=output+this.KEY_STR.charAt(enc1)+this.KEY_STR.charAt(enc2)+this.KEY_STR.charAt(enc3)+this.KEY_STR.charAt(enc4),chr1=chr2=chr3="",enc1=enc2=enc3=enc4="",i<input.length;);return output}},{key:"restore",value:function(origFileBase64,resizedFileBase64){if(!origFileBase64.match("data:image/jpeg;base64,"))return resizedFileBase64;var rawImage=this.decode64(origFileBase64.replace("data:image/jpeg;base64,","")),segments=this.slice2Segments(rawImage),image=this.exifManipulation(resizedFileBase64,segments);return"data:image/jpeg;base64,".concat(this.encode64(image))}},{key:"exifManipulation",value:function(resizedFileBase64,segments){var exifArray=this.getExifArray(segments),newImageArray=this.insertExif(resizedFileBase64,exifArray);return new Uint8Array(newImageArray)}},{key:"getExifArray",value:function(segments){for(var seg=void 0,x=0;x<segments.length;){if(255===(seg=segments[x])[0]&225===seg[1])return seg;x++}return[]}},{key:"insertExif",value:function(resizedFileBase64,exifArray){var imageData=resizedFileBase64.replace("data:image/jpeg;base64,",""),buf=this.decode64(imageData),separatePoint=buf.indexOf(255,3),mae=buf.slice(0,separatePoint),ato=buf.slice(separatePoint),array=mae;return array=(array=array.concat(exifArray)).concat(ato)}},{key:"slice2Segments",value:function(rawImageArray){for(var head=0,segments=[];;){if(255===rawImageArray[head]&218===rawImageArray[head+1])break;if(255===rawImageArray[head]&216===rawImageArray[head+1])head+=2;else{var endPoint=head+(256*rawImageArray[head+2]+rawImageArray[head+3])+2,seg=rawImageArray.slice(head,endPoint);segments.push(seg),head=endPoint}if(head>rawImageArray.length)break}return segments}},{key:"decode64",value:function(input){var chr1=void 0,chr2=void 0,chr3="",enc2=void 0,enc3=void 0,enc4="",i=0,buf=[];for(/[^A-Za-z0-9\+\/\=]/g.exec(input)&&console.warn("There were invalid base64 characters in the input text.\nValid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='\nExpect errors in decoding."),input=input.replace(/[^A-Za-z0-9\+\/\=]/g,"");chr1=this.KEY_STR.indexOf(input.charAt(i++))<<2|(enc2=this.KEY_STR.indexOf(input.charAt(i++)))>>4,chr2=(15&enc2)<<4|(enc3=this.KEY_STR.indexOf(input.charAt(i++)))>>2,chr3=(3&enc3)<<6|(enc4=this.KEY_STR.indexOf(input.charAt(i++))),buf.push(chr1),64!==enc3&&buf.push(chr2),64!==enc4&&buf.push(chr3),chr1=chr2=chr3="",enc2=enc3=enc4="",i<input.length;);return buf}}]),$a601ff30f483e917$var$ExifRestore}();$a601ff30f483e917$var$ExifRestore.initClass();var $a601ff30f483e917$var$contentLoaded=function(win,fn){var done=!1,top=!0,doc=win.document,root=doc.documentElement,add=doc.addEventListener?"addEventListener":"attachEvent",rem=doc.addEventListener?"removeEventListener":"detachEvent",pre=doc.addEventListener?"":"on",init=function(e){if("readystatechange"!==e.type||"complete"===doc.readyState)return("load"===e.type?win:doc)[rem](pre+e.type,init,!1),!done&&(done=!0)?fn.call(win,e.type||e):void 0},poll=function(){try{root.doScroll("left")}catch(e){return void setTimeout(poll,50)}return init("poll")};if("complete"!==doc.readyState){if(doc.createEventObject&&root.doScroll){try{top=!win.frameElement}catch(error){}top&&poll()}return doc[add](pre+"DOMContentLoaded",init,!1),doc[add](pre+"readystatechange",init,!1),win[add](pre+"load",init,!1)}};function $a601ff30f483e917$var$__guard__(value,transform){return null!=value?transform(value):void 0}function $a601ff30f483e917$var$__guardMethod__(obj,methodName,transform){return null!=obj&&"function"==typeof obj[methodName]?transform(obj,methodName):void 0}